{% extends 'tasks/base.html' %}

{% block title %}詳細設定{% endblock %}

{% block content %}
<div class="container">
    <!-- 設定シート（一つのカードにまとめる） -->
    <div class="settings-sheet">
        <h2 class="settings-title">設定</h2>
        
        <!-- アカウント -->
        <div class="settings-group">
            <h3 class="settings-group-title">アカウント</h3>
            <div class="account-info">
                <div class="account-info-item">
                    <span class="account-info-label">ユーザー名:</span>
                    <span class="account-info-value">{{ username }}</span>
                </div>
                {% if email %}
                <div class="account-info-item">
                    <span class="account-info-label">メールアドレス:</span>
                    <span class="account-info-value">{{ email }}</span>
                </div>
                {% else %}
                <div class="account-info-item">
                    <span class="account-info-label">メールアドレス:</span>
                    <span class="account-info-value account-info-empty">未設定</span>
                </div>
                {% endif %}
                <div class="account-info-item">
                    <span class="account-info-label">アカウント作成日:</span>
                    <span class="account-info-value">{{ date_joined|date:"Y年n月j日 H:i" }}</span>
                </div>
                {% if last_login %}
                <div class="account-info-item">
                    <span class="account-info-label">最終ログイン日時:</span>
                    <span class="account-info-value">{{ last_login|date:"Y年n月j日 H:i" }}</span>
                </div>
                {% else %}
                <div class="account-info-item">
                    <span class="account-info-label">最終ログイン日時:</span>
                    <span class="account-info-value account-info-empty">ログイン履歴なし</span>
                </div>
                {% endif %}
            </div>
            <div class="account-actions">
                <a href="{% url 'logout' %}" class="btn btn-danger">
                    <i class="fas fa-sign-out-alt"></i> ログアウト
                </a>
                <button type="button" class="btn btn-danger" id="openDeleteAccountModal">
                    <i class="fas fa-trash"></i> アカウント削除
                </button>
            </div>
        </div>

        <!-- ナイトモード切り替えボタン -->
        <div class="settings-group">
            <h3 class="settings-group-title">表示設定</h3>
            <button id="night-mode-toggle" class="btn night-mode-toggle-btn">
                ナイトモード: <span id="mode-status">オフ</span>
            </button>
        </div>

        <!-- デザイン設定 -->
        <div class="settings-group">
            <h3 class="settings-group-title">デザイン設定</h3>
            <div class="design-options">
                <div class="design-option">
                    <input type="radio" name="design" value="sticky" id="sticky-design" checked>
                    <label for="sticky-design" class="design-preview sticky-note">
                        <h5>付箋デザイン</h5>
                        <small>サンプルテキスト</small>
                    </label>
                </div>
                <div class="design-option">
                    <input type="radio" name="design" value="tape" id="tape-design">
                    <label for="tape-design" class="design-preview tape-design">
                        <h5>テープデザイン</h5>
                        <small>サンプルテキスト</small>
                    </label>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- アカウント削除確認モーダル -->
{% include 'tasks/includes/modals/delete_account_modal.html' %}
{% endblock %}

{% block extra_js %}
{% load static %}
<script src="{% static 'js/settings.js' %}"></script>
{% endblock %}
