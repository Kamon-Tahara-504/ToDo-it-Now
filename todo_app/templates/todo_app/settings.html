{% extends 'todo_app/base.html' %}

{% block title %}詳細設定{% endblock %}

{% block content %}
    <div class="container">
        <!-- <h2>詳細設定</h2>
        <p>ここに設定内容を追加します。</p> -->
        
        <!-- アカウント設定の項目 -->
        <h3>アカウント設定</h3>
        <a href="{% url 'logout' %}" class="btn btn-danger">
            <i class="fas fa-sign-out-alt"></i> ログアウト
        </a>

        <!-- ナイトモード切り替えボタン -->
        <h3 style="margin-top: 30px;">表示設定</h3>
        <button id="night-mode-toggle" class="btn" style="background-color: var(--sticky-yellow);">
            ナイトモード: <span id="mode-status">オフ</span>
        </button>

        <!-- デザイン設定 -->
        <h3 style="margin-top: 30px;">デザイン設定</h3>
        <div class="design-options">
            <div class="design-option">
                <input type="radio" name="design" value="sticky" id="sticky-design" checked>
                <label for="sticky-design" class="design-preview sticky-note">
                    <h5>付箋デザイン</h5>
                    <small>サンプルテキスト</small>
                </label>
            </div>
            <div class="design-option">
                <input type="radio" name="design" value="tape" id="tape-design">
                <label for="tape-design" class="design-preview tape-design">
                    <h5>テープデザイン</h5>
                    <small>サンプルテキスト</small>
                </label>
            </div>
        </div>
    </div>

    <style>
        .design-options {
            display: flex;
            gap: 20px;
            margin-top: 15px;
        }

        .design-option {
            position: relative;
            width: 200px;
        }

        .design-option input[type="radio"] {
            display: none;
        }

        .design-preview {
            display: block;
            cursor: pointer;
            padding: 15px;
            width: 100%;
            min-height: 100px;
            border: 2px solid transparent;
            transition: border 0.3s ease;
        }

        .design-preview h5 {
            margin-bottom: 10px;
            color: #000;
        }

        .design-preview small {
            color: #666;
        }

        /* 選択状態のスタイル */
        .design-option input[type="radio"]:checked + .design-preview {
            border: 2px solid #654321;
        }

        /* ナイトモード対応 */
        .night-mode .design-preview {
            background-color: #2c2c2c;
            color: #fff;
        }

        /*文字の色*/
        .night-mode .design-preview h5 {
            color: #f0ad4e;
        }

        .night-mode .design-preview small {
            color: #f0ad4e;
        }

        .night-mode .design-option input[type="radio"]:checked + .design-preview {
            border: 2px solid #f0ad4e;
        }
    </style>
    
    <script>
        const toggleButton = document.getElementById('night-mode-toggle');
        const modeStatus = document.getElementById('mode-status');

        // 初期状態をローカルストレージから取得
        if (localStorage.getItem('night-mode') === 'enabled') {
            modeStatus.textContent = 'オン';
        }

        // デザイン設定の初期状態を取得
        const designRadios = document.querySelectorAll('input[name="design"]');
        const savedDesign = localStorage.getItem('card-design') || 'sticky';
        document.querySelector(`input[value="${savedDesign}"]`).checked = true;

        designRadios.forEach(radio => {
            radio.addEventListener('change', () => {
                localStorage.setItem('card-design', radio.value);
                applyDesign();
            });
        });

        toggleButton.addEventListener('click', () => {
            document.body.classList.toggle('night-mode');
            if (document.body.classList.contains('night-mode')) {
                modeStatus.textContent = 'オン';
                localStorage.setItem('night-mode', 'enabled');
            } else {
                modeStatus.textContent = 'オフ';
                localStorage.removeItem('night-mode');
            }
        });

        function applyDesign() {
            const currentDesign = localStorage.getItem('card-design') || 'sticky';
            const taskCards = document.querySelectorAll('.task-card');

            taskCards.forEach(card => {
                card.classList.remove('tape-design', 'sticky-note');
                card.classList.add(currentDesign === 'tape' ? 'tape-design' : 'sticky-note');
            });
        }

        // ページ読み込み時にデザインを適用
        applyDesign();
    </script>
{% endblock %} 